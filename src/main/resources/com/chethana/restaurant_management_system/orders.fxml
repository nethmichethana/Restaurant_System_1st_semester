<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.chethana.restaurant_management_system.controllers.OrderController"
            style="-fx-background-color: #f8fafc;">

    <top>
        <VBox spacing="20" style="-fx-padding: 25 30; -fx-background-color: white; -fx-border-color: #e2e8f0; -fx-border-width: 0 0 1 0;">

            <!-- Page Title -->
            <HBox alignment="CENTER_LEFT" spacing="12">
                <Label text="ðŸ“" style="-fx-font-size: 28px;" />
                <VBox spacing="2">
                    <Label text="Order Management"
                           style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #1e293b;" />
                    <Label text="Manage and track all restaurant orders"
                           style="-fx-font-size: 13px; -fx-text-fill: #64748b;" />
                </VBox>
            </HBox>

            <!-- Action Buttons and Filters -->
            <HBox spacing="12" alignment="CENTER_LEFT">

                <!-- Action Buttons -->
                <HBox spacing="10">
                    <Button text="âž• New Order"
                            style="-fx-background-color: #3b82f6; -fx-text-fill: white; -fx-font-weight: 600; -fx-font-size: 13px; -fx-padding: 10 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-border-width: 0;"
                            onAction="#handleNewOrder" />
                    <Button text="ðŸ‘ï¸ View Details"
                            style="-fx-background-color: #eff6ff; -fx-text-fill: #3b82f6; -fx-font-weight: 600; -fx-font-size: 13px; -fx-padding: 10 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-border-color: #dbeafe; -fx-border-width: 1; -fx-border-radius: 8;"
                            onAction="#handleViewOrder" />
                    <Button text="ðŸ”„ Update Status"
                            style="-fx-background-color: #eff6ff; -fx-text-fill: #3b82f6; -fx-font-weight: 600; -fx-font-size: 13px; -fx-padding: 10 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-border-color: #dbeafe; -fx-border-width: 1; -fx-border-radius: 8;"
                            onAction="#handleUpdateStatus" />
                    <Button text="âŒ Cancel Order"
                            style="-fx-background-color: #fef2f2; -fx-text-fill: #ef4444; -fx-font-weight: 600; -fx-font-size: 13px; -fx-padding: 10 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-border-color: #fecaca; -fx-border-width: 1; -fx-border-radius: 8;"
                            onAction="#handleCancelOrder" />
                </HBox>

                <Region HBox.hgrow="ALWAYS" />

                <!-- Filter Section -->
                <HBox spacing="10" alignment="CENTER_RIGHT">
                    <Label text="ðŸ”" style="-fx-font-size: 16px; -fx-text-fill: #64748b;" />
                    <TextField fx:id="searchField"
                               promptText="Search orders..."
                               style="-fx-pref-width: 180; -fx-padding: 8 12; -fx-font-size: 13px; -fx-background-color: #f8fafc; -fx-text-fill: #1e293b; -fx-prompt-text-fill: #94a3b8; -fx-background-radius: 8; -fx-border-color: #cbd5e1; -fx-border-width: 1; -fx-border-radius: 8;"
                               onKeyReleased="#handleSearch" />
                    <DatePicker fx:id="dateFilter"
                                promptText="Filter by date"
                                style="-fx-pref-width: 150; -fx-background-radius: 8; -fx-border-radius: 8;"
                                onAction="#handleSearch" />
                    <ComboBox fx:id="statusFilter"
                              promptText="All Status"
                              style="-fx-pref-width: 140; -fx-background-radius: 8; -fx-border-radius: 8;"
                              onAction="#handleSearch" />
                </HBox>
            </HBox>

            <!-- Quick Stats -->
            <HBox spacing="15" style="-fx-padding: 15 0 0 0;">
                <VBox spacing="4" style="-fx-padding: 12 18; -fx-background-color: #eff6ff; -fx-background-radius: 10; -fx-border-color: #dbeafe; -fx-border-width: 1; -fx-border-radius: 10;">
                    <Label text="Total Orders" style="-fx-font-size: 11px; -fx-text-fill: #64748b; -fx-font-weight: 500;" />
                    <Label fx:id="totalOrdersLabel" text="0" style="-fx-font-size: 20px; -fx-text-fill: #3b82f6; -fx-font-weight: bold;" />
                </VBox>

                <VBox spacing="4" style="-fx-padding: 12 18; -fx-background-color: #f0fdf4; -fx-background-radius: 10; -fx-border-color: #bbf7d0; -fx-border-width: 1; -fx-border-radius: 10;">
                    <Label text="Completed" style="-fx-font-size: 11px; -fx-text-fill: #64748b; -fx-font-weight: 500;" />
                    <Label fx:id="completedOrdersLabel" text="0" style="-fx-font-size: 20px; -fx-text-fill: #22c55e; -fx-font-weight: bold;" />
                </VBox>

                <VBox spacing="4" style="-fx-padding: 12 18; -fx-background-color: #fef3c7; -fx-background-radius: 10; -fx-border-color: #fde68a; -fx-border-width: 1; -fx-border-radius: 10;">
                    <Label text="Pending" style="-fx-font-size: 11px; -fx-text-fill: #64748b; -fx-font-weight: 500;" />
                    <Label fx:id="pendingOrdersLabel" text="0" style="-fx-font-size: 20px; -fx-text-fill: #f59e0b; -fx-font-weight: bold;" />
                </VBox>

                <VBox spacing="4" style="-fx-padding: 12 18; -fx-background-color: #eff6ff; -fx-background-radius: 10; -fx-border-color: #dbeafe; -fx-border-width: 1; -fx-border-radius: 10;">
                    <Label text="Today's Revenue" style="-fx-font-size: 11px; -fx-text-fill: #64748b; -fx-font-weight: 500;" />
                    <Label fx:id="revenueLabel" text="Rs. 0.00" style="-fx-font-size: 20px; -fx-text-fill: #3b82f6; -fx-font-weight: bold;" />
                </VBox>
            </HBox>

        </VBox>
    </top>

    <center>
        <VBox style="-fx-padding: 20 30; -fx-background-color: #f8fafc;">

            <!-- Table Container -->
            <VBox style="-fx-background-color: white; -fx-background-radius: 12; -fx-border-color: #e2e8f0; -fx-border-width: 1; -fx-border-radius: 12; -fx-padding: 0;" VBox.vgrow="ALWAYS">

                <!-- Table Header -->
                <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 15 20; -fx-background-color: #f8fafc; -fx-border-color: #e2e8f0; -fx-border-width: 0 0 1 0; -fx-background-radius: 12 12 0 0;">
                    <Label text="Order List" style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-text-fill: #1e293b;" />
                    <Region HBox.hgrow="ALWAYS" />
                    <Button fx:id="refreshButton" text="ðŸ”„ Refresh"
                            style="-fx-background-color: transparent; -fx-text-fill: #3b82f6; -fx-font-size: 12px; -fx-font-weight: 600; -fx-cursor: hand; -fx-border-width: 0; -fx-padding: 5 10;"
                            onAction="#handleRefresh" />
                </HBox>

                <!-- Table View -->
                <TableView fx:id="orderTable"
                           style="-fx-background-color: white; -fx-border-width: 0; -fx-background-radius: 0 0 12 12;"
                           VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="colOrderId" text="Order ID" prefWidth="90"
                                     style="-fx-alignment: CENTER;" />
                        <TableColumn fx:id="colCustomerName" text="Customer" prefWidth="150" />
                        <TableColumn fx:id="colStaffName" text="Staff" prefWidth="130" />
                        <TableColumn fx:id="colOrderTime" text="Order Time" prefWidth="160" />
                        <TableColumn fx:id="colTotalAmount" text="Total (Rs.)" prefWidth="110"
                                     style="-fx-alignment: CENTER_RIGHT;" />
                        <TableColumn fx:id="colStatus" text="Status" prefWidth="120"
                                     style="-fx-alignment: CENTER;" />
                        <TableColumn fx:id="colActions" text="Actions" prefWidth="100"
                                     style="-fx-alignment: CENTER;" />
                    </columns>
                    <columnResizePolicy>
                        <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                    </columnResizePolicy>
                    <placeholder>
                        <VBox alignment="CENTER" spacing="10" style="-fx-padding: 40;">
                            <Label text="ðŸ“" style="-fx-font-size: 48px; -fx-opacity: 0.3;" />
                            <Label text="No orders found" style="-fx-font-size: 16px; -fx-text-fill: #94a3b8; -fx-font-weight: 600;" />
                            <Label text="Create a new order to get started" style="-fx-font-size: 13px; -fx-text-fill: #cbd5e1;" />
                        </VBox>
                    </placeholder>
                </TableView>

            </VBox>

        </VBox>
    </center>

    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 15 30; -fx-background-color: white; -fx-border-color: #e2e8f0; -fx-border-width: 1 0 0 0;">
            <Label fx:id="statusLabel" text="Ready" style="-fx-text-fill: #64748b; -fx-font-size: 13px;" />
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="recordCountLabel" text="Showing 0 orders" style="-fx-text-fill: #64748b; -fx-font-size: 13px;" />
        </HBox>
    </bottom>

</BorderPane>